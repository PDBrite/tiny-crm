{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdog/projects/lead-manager/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)\n\n// Client-side Supabase client\nexport function createClientComponentClient() {\n  return createClient<Database>(supabaseUrl, supabaseAnonKey)\n} "],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAY,aAAa;AAGrD,SAAS;IACd,OAAO,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAY,aAAa;AAC7C","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdog/projects/lead-manager/src/app/api/touchpoint-counts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { supabase } from '../../../lib/supabase'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const startDate = searchParams.get('startDate')\n    const endDate = searchParams.get('endDate')\n    const campaignId = searchParams.get('campaignId')\n    const company = searchParams.get('company')\n\n    if (!startDate || !endDate) {\n      return NextResponse.json({ error: 'Start date and end date are required' }, { status: 400 })\n    }\n\n    // Build the query with lead join for company filtering\n    let query = supabase\n      .from('touchpoints')\n      .select(`\n        scheduled_at,\n        lead:leads!inner(company, campaign_id)\n      `)\n      .gte('scheduled_at', startDate)\n      .lte('scheduled_at', endDate + 'T23:59:59.999Z')\n      .is('completed_at', null)\n\n    // Add company filter if provided\n    if (company) {\n      query = query.eq('lead.company', company)\n    }\n\n    // Add campaign filter if provided\n    if (campaignId) {\n      query = query.eq('lead.campaign_id', campaignId)\n    }\n\n    const { data: touchpoints, error } = await query\n\n    if (error) {\n      console.error('Error fetching touchpoint counts:', error)\n      return NextResponse.json({ error: 'Failed to fetch touchpoint counts' }, { status: 500 })\n    }\n\n    // Count touchpoints by date\n    const counts: Record<string, number> = {}\n    \n    touchpoints?.forEach((touchpoint: any) => {\n      const date = new Date(touchpoint.scheduled_at).toISOString().split('T')[0]\n      counts[date] = (counts[date] || 0) + 1\n    })\n\n    return NextResponse.json({ counts })\n  } catch (error) {\n    console.error('Error in touchpoint-counts API:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n} "],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,UAAU,aAAa,GAAG,CAAC;QACjC,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,UAAU,aAAa,GAAG,CAAC;QAEjC,IAAI,CAAC,aAAa,CAAC,SAAS;YAC1B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuC,GAAG;gBAAE,QAAQ;YAAI;QAC5F;QAEA,uDAAuD;QACvD,IAAI,QAAQ,wHAAA,CAAA,WAAQ,CACjB,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;MAGT,CAAC,EACA,GAAG,CAAC,gBAAgB,WACpB,GAAG,CAAC,gBAAgB,UAAU,kBAC9B,EAAE,CAAC,gBAAgB;QAEtB,iCAAiC;QACjC,IAAI,SAAS;YACX,QAAQ,MAAM,EAAE,CAAC,gBAAgB;QACnC;QAEA,kCAAkC;QAClC,IAAI,YAAY;YACd,QAAQ,MAAM,EAAE,CAAC,oBAAoB;QACvC;QAEA,MAAM,EAAE,MAAM,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM;QAE3C,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,qCAAqC;YACnD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoC,GAAG;gBAAE,QAAQ;YAAI;QACzF;QAEA,4BAA4B;QAC5B,MAAM,SAAiC,CAAC;QAExC,aAAa,QAAQ,CAAC;YACpB,MAAM,OAAO,IAAI,KAAK,WAAW,YAAY,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAC1E,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI;QACvC;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE;QAAO;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF","debugId":null}}]
}